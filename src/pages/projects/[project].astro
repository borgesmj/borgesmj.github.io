---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProjectInfo from "../../Components/ProjectInfo";


export async function getStaticPaths() {
    const data = await fetch("https://api.github.com/users/borgesmj/repos")
    .then(response => response.json())
    return data.map((project) => {
        return {
            params: {project:  project.name},
        }
    });
}
const response = await fetch("https://api.github.com/users/borgesmj/repos");
const data = await response.json();

const {project} = Astro.params

const projectName: string = project
---

<BaseLayout pageTitle = {project}>
    <h2
    class="w-full text-left text-2xl border-b-2 border-b-solid border-d-white py-4 px-4 italic font-bold"
  >
    {`Project: ${projectName.replace(/\-/g, " ")}`}
  </h2>
  <ProjectInfo data={data} name={project}/>
</BaseLayout>
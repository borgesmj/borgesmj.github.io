---
import BaseLayout from "../layouts/BaseLayout.astro";
import Project from "../Components/Project";
const pageTitle = "MB | Projects";
const response = await fetch("https://api.github.com/users/borgesmj/repos");
const data = await response.json();

const filteredData = data.filter((item) => {
  return (
    item.name !== "30-Days-Of-JavaScript" &&
    item.name !== "50projects50days" &&
    item.name !== "aspirantes-mir-ejercicio-1" &&
    item.name !== "aspirantes-mir-ejercicioi-3" &&
    item.name !== "borgesmj" &&
    item.name !== "borgesmj.github.io" &&
    item.name !== "cloud-storage" &&
    item.name !== "crear-multipage-vite" &&
    item.name !== "kids-quiz" &&
    item.name !== "Udemy-react" &&
    item.name !== "course-Full-Stack-Open-2023-part-3" &&
    item.name !== "course-Full-Stack-Open-2023" &&
    item.name !== "retos-programacion-2023"
  );
});

const orderedRepos = filteredData.sort((a, b) => {
  const dateA = new Date(a.created_at).getTime();
  const dateB = new Date(b.created_at).getTime();

  return dateB - dateA;
});
---

<BaseLayout pageTitle={pageTitle}>
  <h2
    class="w-full text-rigth text-2xl border-b-2 border-b-solid border-d-white py-4 font-bold xl:w-4/5 xl:ml-4"
  >
    Projects
  </h2>
  <section
    class="p-4 flex flex-wrap items-center justify-center md:justify-between"
  >
    {
      orderedRepos.map((repo) => (
        <Project
          repo_title={repo.name}
          repo_description={repo.description}
          repo_homepage={repo.homepage}
          repo_html_url={repo.html_url}
          topics={repo.topics}
          created_at={repo.created_at}
          updated_at={repo.updated_at}
        />
      ))
    }
  </section>
</BaseLayout>
